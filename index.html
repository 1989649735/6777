<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¸æˆé›†åˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 40px;
            max-width: 1200px;
            width: 100%;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        /* åˆ†ç±»æ ‡ç­¾æ ·å¼ */
        .category-section {
            margin-bottom: 30px;
        }
        
        .category-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }
        
        .category-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .category-tag {
            padding: 8px 16px;
            background: #f0f0f0;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9em;
            font-weight: 500;
        }
        
        .category-tag:hover {
            background: #e0e0e0;
            transform: translateY(-1px);
        }
        
        .category-tag.active {
            background: #4a90e2;
            color: white;
            border-color: #4a90e2;
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.3);
        }
        
        /* ç­›é€‰çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .filter-status {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .filter-chip {
            display: flex;
            align-items: center;
            padding: 6px 12px;
            background: #4a90e2;
            color: white;
            border-radius: 15px;
            font-size: 0.8em;
        }
        
        .filter-chip .remove-btn {
            margin-left: 8px;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.1em;
            line-height: 1;
        }
        
        .filter-status .no-filters {
            color: #666;
            font-size: 0.9em;
        }
        
        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        /* æ¸¸æˆå¡ç‰‡åŸºç¡€æ ·å¼ */
        .game-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
            opacity: 0;
            transform: translateY(20px);
            animation: cardSlideIn 0.5s ease-out forwards;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }
        
        /* å¡ç‰‡æ»‘å…¥åŠ¨ç”» */
        @keyframes cardSlideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ä¸ºæ¯ä¸ªå¡ç‰‡è®¾ç½®ä¸åŒçš„åŠ¨ç”»å»¶è¿Ÿ */
        .game-card:nth-child(1) { animation-delay: 0ms; }
        .game-card:nth-child(2) { animation-delay: 50ms; }
        .game-card:nth-child(3) { animation-delay: 100ms; }
        .game-card:nth-child(4) { animation-delay: 150ms; }
        .game-card:nth-child(5) { animation-delay: 200ms; }
        .game-card:nth-child(6) { animation-delay: 250ms; }
        .game-card:nth-child(7) { animation-delay: 300ms; }
        .game-card:nth-child(8) { animation-delay: 350ms; }
        .game-card:nth-child(9) { animation-delay: 400ms; }
        
        /* å¡ç‰‡hoveræ•ˆæœä¼˜åŒ– */
        .game-card:hover {
            transform: translateY(-5px) rotate(0.5deg);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2);
            border-color: #4a90e2;
            transition: all 0.2s ease;
        }
        
        /* ä¸ºæ¯ä¸ªæ¸¸æˆå¡ç‰‡è®¾ç½®ä¸åŒçš„ä¸»é¢˜è‰² */
        .game-card[data-game-id="24-point"] {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .game-card[data-game-id="guess-number"] {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .game-card[data-game-id="minesweeper"] {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        .game-card[data-game-id="tetris"] {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        
        .game-card.hidden {
            display: none;
        }
        
        /* æ¸¸æˆå¡ç‰‡åˆ†ç±»æ ‡ç­¾ */
        .game-categories {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .game-category-badge {
            padding: 4px 8px;
            background: rgba(255, 255, 255, 0.3);
            color: white;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: bold;
        }
        
        /* æ¸¸æˆé¢„è§ˆåŠ¨æ•ˆ */
        .game-preview {
            position: relative;
            width: 100%;
            height: 120px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .preview-placeholder {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9em;
        }
        
        .preview-gif {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .game-card:hover .preview-gif {
            opacity: 1;
        }
        
        /* æ¸¸æˆæ•°æ®å±•ç¤ºåŒºåŸŸ */
        .game-stats {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            font-size: 0.8em;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.8em;
        }
        
        .stat-value {
            color: white;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        /* æ¸¸æˆéš¾åº¦æ ‡è¯† */
        .game-difficulty {
            margin: 15px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
        }
        
        .difficulty-label {
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .difficulty-options {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        
        .difficulty-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.2s ease;
            background: rgba(255, 255, 255, 0.3);
            min-width: 60px;
        }
        
        .difficulty-option:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }
        
        .difficulty-option .stars {
            color: gold;
            font-size: 0.9em;
        }
        
        .difficulty-option .level {
            color: white;
            font-size: 0.7em;
            font-weight: bold;
        }
        
        /* æ¸¸æˆæŒ‰é’®ç»„ */
        .game-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
        
        /* æ¸¸æˆæŒ‰é’®æ ·å¼ */
        .game-btn {
            display: inline-block;
            background: white;
            color: #333;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.1s ease;
            border: none;
            cursor: pointer;
            font-size: 0.9em;
            position: relative;
            overflow: hidden;
        }
        
        .game-btn:hover {
            background: #f0f0f0;
            transform: scale(1.05);
        }
        
        /* æŒ‰é’®ç‚¹å‡»åé¦ˆæ•ˆæœ */
        .game-btn:active {
            transform: scale(0.95);
            transition: all 0.1s ease;
            opacity: 0.8;
        }
        
        .game-btn.secondary {
            background: rgba(255, 255, 255, 0.3);
            color: white;
            border: 2px solid white;
        }
        
        .game-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.5);
        }
        
        .game-btn.secondary:active {
            background: rgba(255, 255, 255, 0.4);
        }
        
        /* åŠ è½½çŠ¶æ€æç¤º */
        #loadingOverlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        #loadingOverlay.show {
            opacity: 1;
            pointer-events: all;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #4a90e2;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 1.2em;
            color: #333;
            margin-bottom: 10px;
        }
        
        .loading-progress {
            font-size: 0.9em;
            color: #666;
        }
        
        /* æš—é»‘æ¨¡å¼ä¸‹çš„åŠ è½½çŠ¶æ€ */
        body.dark-mode #loadingOverlay {
            background: rgba(52, 73, 94, 0.9);
        }
        
        body.dark-mode .loading-text {
            color: white;
        }
        
        body.dark-mode .loading-progress {
            color: #ccc;
        }
        
        .game-card h2 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.3em;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .game-card p {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 15px;
            font-size: 0.9em;
        }
        
        /* æ¨¡æ€çª—å£æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .modal-title {
            font-size: 1.5em;
            color: #333;
            font-weight: bold;
        }
        
        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
        }
        
        .modal-body {
            margin-bottom: 20px;
        }
        
        .modal-difficulty-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .modal-difficulty-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .modal-difficulty-option:hover {
            border-color: #4a90e2;
            background: #f8f9fa;
            transform: translateX(5px);
        }
        
        .modal-difficulty-option.selected {
            border-color: #4a90e2;
            background: #e3f2fd;
        }
        
        .modal-difficulty-info {
            flex: 1;
        }
        
        .modal-difficulty-name {
            font-weight: bold;
            color: #333;
            font-size: 1.1em;
        }
        
        .modal-difficulty-desc {
            font-size: 0.9em;
            color: #666;
            margin-top: 4px;
        }
        
        .modal-footer {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        
        .btn-primary {
            background: #4a90e2;
            color: white;
        }
        
        .btn-primary:hover {
            background: #357abd;
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        /* å…¨å±€åŠŸèƒ½æ§åˆ¶é¢æ¿ */
        .global-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1001;
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9em;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .control-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        /* æš—é»‘æ¨¡å¼æ ·å¼ */
        body.dark-mode {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
        }
        
        body.dark-mode .container {
            background: #34495e;
            color: white;
        }
        
        body.dark-mode h1 {
            color: white;
        }
        
        body.dark-mode .category-title {
            color: white;
        }
        
        body.dark-mode .category-tag {
            background: #555;
            color: white;
            border-color: #666;
        }
        
        body.dark-mode .category-tag:hover {
            background: #666;
        }
        
        body.dark-mode .category-tag.active {
            background: #3498db;
            border-color: #3498db;
        }
        
        body.dark-mode .filter-status {
            background: #555;
        }
        
        body.dark-mode .no-filters {
            color: #ccc;
        }
        
        body.dark-mode .footer {
            color: rgba(255, 255, 255, 0.6);
        }
        
        /* æ¨¡æ€çª—å£æš—é»‘æ¨¡å¼ */
        body.dark-mode .modal-content {
            background: #34495e;
            color: white;
        }
        
        body.dark-mode .modal-header {
            border-bottom-color: #555;
        }
        
        body.dark-mode .modal-title {
            color: white;
        }
        
        body.dark-mode .close {
            color: #ccc;
        }
        
        body.dark-mode .close:hover {
            color: white;
        }
        
        body.dark-mode .modal-difficulty-desc {
            color: #ccc;
        }
        
        body.dark-mode .btn-secondary {
            background: #555;
            color: white;
        }
        
        body.dark-mode .btn-secondary:hover {
            background: #666;
        }
        
        /* éŸ³é‡æ§åˆ¶æ ·å¼ */
        .volume-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .volume-slider {
            width: 80px;
            cursor: pointer;
        }
        
        /* è¯­è¨€é€‰æ‹©æ ·å¼ */
        .language-select {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
        }
        
        .footer {
            margin-top: 40px;
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9em;
        }
        
        /* åŸºç¡€å“åº”å¼è®¾ç½® */
        h1 {
            font-size: clamp(1.8em, 4vw, 2.5em);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        /* æ¸¸æˆå¡ç‰‡ç½‘æ ¼å“åº”å¼å¸ƒå±€ */
        @media (min-width: 1921px) {
            .game-grid {
                grid-template-columns: repeat(5, 1fr);
            }
        }
        
        @media (max-width: 1920px) {
            .game-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        @media (max-width: 1200px) {
            .game-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* å¹³æ¿è®¾å¤‡ï¼ˆ768px-1024pxï¼‰2åˆ—å¸ƒå±€ */
        @media (max-width: 1024px) {
            .game-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .global-controls {
                flex-wrap: wrap;
                top: 10px;
                right: 10px;
                gap: 8px;
            }
            
            .control-btn {
                padding: 6px 10px;
                font-size: 0.8em;
            }
        }
        
        /* æ‰‹æœºè®¾å¤‡å•åˆ—å¸ƒå±€ */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .game-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .category-tags {
                gap: 8px;
            }
            
            .category-tag {
                padding: 6px 12px;
                font-size: 0.8em;
            }
            
            /* å…¨å±€æ§åˆ¶é¢æ¿åœ¨ç§»åŠ¨ç«¯çš„é€‚é… */
            .global-controls {
                position: static;
                justify-content: center;
                margin-bottom: 20px;
                flex-wrap: wrap;
            }
            
            /* æ¸¸æˆé¢„è§ˆåŒºåŸŸåœ¨ç§»åŠ¨ç«¯çš„é€‚é… */
            .game-preview {
                height: 100px;
            }
            
            /* æ¸¸æˆæ•°æ®å±•ç¤ºåœ¨ç§»åŠ¨ç«¯çš„é€‚é… */
            .game-stats {
                font-size: 0.7em;
            }
        }
        
        /* å°å±æ‰‹æœºé€‚é… */
        @media (max-width: 320px) {
            .container {
                padding: 15px;
            }
            
            .game-card {
                padding: 20px;
            }
            
            .game-preview {
                height: 80px;
            }
        }
    </style>
</head>
<body>
    <!-- åŠ è½½çŠ¶æ€æç¤º -->
    <div id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">åŠ è½½ä¸­...</div>
        <div class="loading-progress">å‡†å¤‡èµ„æºæ–‡ä»¶...</div>
    </div>
    
    <!-- å…¨å±€åŠŸèƒ½æ§åˆ¶é¢æ¿ -->
    <div class="global-controls">
        <!-- æš—é»‘æ¨¡å¼åˆ‡æ¢ -->
        <button class="control-btn" onclick="toggleDarkMode()" id="darkModeBtn" aria-label="åˆ‡æ¢æš—é»‘æ¨¡å¼" tabindex="0">
            <span>ğŸŒ™</span>
            <span id="darkModeText">æš—é»‘æ¨¡å¼</span>
        </button>
        
        <!-- å¤šè¯­è¨€åˆ‡æ¢ -->
        <select class="control-btn language-select" id="languageSelect" onchange="changeLanguage(this.value)" aria-label="é€‰æ‹©è¯­è¨€" tabindex="0">
            <option value="zh-CN">ä¸­æ–‡</option>
            <option value="en-US">English</option>
        </select>
        
        <!-- èƒŒæ™¯éŸ³ä¹æ§åˆ¶ -->
        <div class="control-btn volume-control" aria-label="èƒŒæ™¯éŸ³ä¹æ§åˆ¶">
            <span id="musicIcon" aria-hidden="true">ğŸµ</span>
            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50" oninput="adjustVolume(this.value)" aria-label="éŸ³é‡è°ƒèŠ‚" tabindex="0">
            <button onclick="toggleMusic()" id="musicToggle" style="background: none; border: none; cursor: pointer; font-size: 0.9em;" aria-label="åˆ‡æ¢éŸ³ä¹æ’­æ”¾çŠ¶æ€" tabindex="0">æ’­æ”¾</button>
        </div>
    </div>
    
    <div class="container">
        <h1 id="pageTitle">ğŸ® æ¸¸æˆé›†åˆ ğŸ®</h1>
        
        <!-- æ¸¸æˆåˆ†ç±»ä¸ç­›é€‰ç³»ç»Ÿ -->
        <div class="category-section" role="region" aria-labelledby="categoryTitle">
            <div class="category-title" id="categoryTitle">æ¸¸æˆåˆ†ç±»ï¼š</div>
            <div class="category-tags" role="group" aria-label="æ¸¸æˆåˆ†ç±»ç­›é€‰">
                <span class="category-tag active" data-category="all" role="button" tabindex="0" aria-label="æ˜¾ç¤ºæ‰€æœ‰æ¸¸æˆ">å…¨éƒ¨</span>
                <span class="category-tag" data-category="puzzle" role="button" tabindex="0" aria-label="ç­›é€‰ç›Šæ™ºç±»æ¸¸æˆ">ç›Šæ™ºç±»</span>
                <span class="category-tag" data-category="casual" role="button" tabindex="0" aria-label="ç­›é€‰ä¼‘é—²ç±»æ¸¸æˆ">ä¼‘é—²ç±»</span>
                <span class="category-tag" data-category="competitive" role="button" tabindex="0" aria-label="ç­›é€‰ç«æŠ€ç±»æ¸¸æˆ">ç«æŠ€ç±»</span>
            </div>
            <div class="filter-status" role="status" aria-live="polite">
                <span class="no-filters">æœªåº”ç”¨ç­›é€‰</span>
            </div>
        </div>
        
        <div class="game-grid">
            <div class="game-card" data-categories="puzzle,casual" data-game-id="24-point" role="article" aria-labelledby="gameTitle-24-point">
                <div class="game-categories">
                    <span class="game-category-badge">ç›Šæ™ºç±»</span>
                    <span class="game-category-badge">ä¼‘é—²ç±»</span>
                </div>
                <!-- æ¸¸æˆé¢„è§ˆåŒºåŸŸ -->
                <div class="game-preview">
                    <div class="preview-placeholder" aria-hidden="true">ğŸ® æ‚¬åœæŸ¥çœ‹æ¸¸æˆé¢„è§ˆ</div>
                    <img src="#" alt="24ç‚¹æ¸¸æˆé¢„è§ˆ" class="preview-gif" data-gif="24-point-preview.gif" aria-hidden="true">
                </div>
                <h2 id="gameTitle-24-point">24ç‚¹æ¸¸æˆ</h2>
                <p aria-describedby="gameDesc-24-point">ä½¿ç”¨ç»™å®šçš„å››ä¸ªæ•°å­—ï¼Œé€šè¿‡åŠ å‡ä¹˜é™¤è¿ç®—å¾—åˆ°24</p>
                
                <!-- æ¸¸æˆæ•°æ®å±•ç¤º -->
                <div class="game-stats" role="group" aria-label="æ¸¸æˆç»Ÿè®¡æ•°æ®">
                    <div class="stat-item">
                        <div class="stat-label">æœ€é«˜å¾—åˆ†</div>
                        <div class="stat-value" data-stat="highestScore" aria-live="polite">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">æ¸¸ç©æ¬¡æ•°</div>
                        <div class="stat-value" data-stat="playedCount" aria-live="polite">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">æœ€è¿‘æ¸¸ç©</div>
                        <div class="stat-value" data-stat="lastPlayed" aria-live="polite">-</div>
                    </div>
                </div>
                
                <!-- éš¾åº¦é€‰æ‹©åŒºåŸŸ -->
                <div class="game-difficulty" role="group" aria-labelledby="difficultyLabel-24-point">
                    <div class="difficulty-label" id="difficultyLabel-24-point">éš¾åº¦é€‰æ‹©ï¼š</div>
                    <div class="difficulty-options">
                        <div class="difficulty-option" data-difficulty="easy" role="button" tabindex="0" aria-label="é€‰æ‹©ç®€å•éš¾åº¦">
                            <div class="stars" aria-hidden="true">â˜…</div>
                            <div class="level">ç®€å•</div>
                        </div>
                        <div class="difficulty-option" data-difficulty="medium" role="button" tabindex="0" aria-label="é€‰æ‹©ä¸­ç­‰éš¾åº¦">
                            <div class="stars" aria-hidden="true">â˜…â˜…</div>
                            <div class="level">ä¸­ç­‰</div>
                        </div>
                        <div class="difficulty-option" data-difficulty="hard" role="button" tabindex="0" aria-label="é€‰æ‹©å›°éš¾éš¾åº¦">
                            <div class="stars" aria-hidden="true">â˜…â˜…â˜…</div>
                            <div class="level">å›°éš¾</div>
                        </div>
                    </div>
                </div>
                
                <!-- æ¸¸æˆæŒ‰é’®ç»„ -->
                <div class="game-actions" role="group" aria-label="æ¸¸æˆæ“ä½œæŒ‰é’®">
                    <button class="game-btn" onclick="startGameWithModal('24-point', '24ç‚¹æ¸¸æˆ', '24-point-game/index.html')" aria-label="å¼€å§‹24ç‚¹æ¸¸æˆ">å¼€å§‹æ¸¸æˆ</button>
                    <button class="game-btn secondary" onclick="playPreview('24-point')" aria-label="è¯•ç©24ç‚¹æ¸¸æˆ">è¯•ç©</button>
                </div>
            </div>
            
            <div class="game-card" data-categories="puzzle,casual" data-game-id="guess-number">
                <div class="game-categories">
                    <span class="game-category-badge">ç›Šæ™ºç±»</span>
                    <span class="game-category-badge">ä¼‘é—²ç±»</span>
                </div>
                <!-- æ¸¸æˆé¢„è§ˆåŒºåŸŸ -->
                <div class="game-preview">
                    <div class="preview-placeholder">ğŸ® æ‚¬åœæŸ¥çœ‹æ¸¸æˆé¢„è§ˆ</div>
                    <img src="#" alt="çŒœæ•°å­—æ¸¸æˆé¢„è§ˆ" class="preview-gif" data-gif="guess-number-preview.gif">
                </div>
                <h2>çŒœæ•°å­—æ¸¸æˆ</h2>
                <p>çŒœæµ‹éšæœºç”Ÿæˆçš„æ•°å­—ï¼ŒæŒ‘æˆ˜ä½ çš„æ¨ç†èƒ½åŠ›</p>
                
                <!-- æ¸¸æˆæ•°æ®å±•ç¤º -->
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-label">æœ€é«˜å¾—åˆ†</div>
                        <div class="stat-value" data-stat="highestScore">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">æ¸¸ç©æ¬¡æ•°</div>
                        <div class="stat-value" data-stat="playedCount">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">æœ€è¿‘æ¸¸ç©</div>
                        <div class="stat-value" data-stat="lastPlayed">-</div>
                    </div>
                </div>
                
                <!-- éš¾åº¦é€‰æ‹©åŒºåŸŸ -->
                <div class="game-difficulty">
                    <div class="difficulty-label">éš¾åº¦é€‰æ‹©ï¼š</div>
                    <div class="difficulty-options">
                        <div class="difficulty-option" data-difficulty="easy">
                            <div class="stars">â˜…</div>
                            <div class="level">ç®€å•</div>
                        </div>
                        <div class="difficulty-option" data-difficulty="medium">
                            <div class="stars">â˜…â˜…</div>
                            <div class="level">ä¸­ç­‰</div>
                        </div>
                        <div class="difficulty-option" data-difficulty="hard">
                            <div class="stars">â˜…â˜…â˜…</div>
                            <div class="level">å›°éš¾</div>
                        </div>
                    </div>
                </div>
                
                <!-- æ¸¸æˆæŒ‰é’®ç»„ -->
                <div class="game-actions">
                    <button class="game-btn" onclick="startGameWithModal('guess-number', 'çŒœæ•°å­—æ¸¸æˆ', 'guess-number-game/index.html')">å¼€å§‹æ¸¸æˆ</button>
                    <button class="game-btn secondary" onclick="playPreview('guess-number')">è¯•ç©</button>
                </div>
            </div>
            
            <div class="game-card" data-categories="puzzle,casual" data-game-id="minesweeper">
                <div class="game-categories">
                    <span class="game-category-badge">ç›Šæ™ºç±»</span>
                    <span class="game-category-badge">ä¼‘é—²ç±»</span>
                </div>
                <!-- æ¸¸æˆé¢„è§ˆåŒºåŸŸ -->
                <div class="game-preview">
                    <div class="preview-placeholder">ğŸ® æ‚¬åœæŸ¥çœ‹æ¸¸æˆé¢„è§ˆ</div>
                    <img src="#" alt="æ‰«é›·æ¸¸æˆé¢„è§ˆ" class="preview-gif" data-gif="minesweeper-preview.gif">
                </div>
                <h2>æ‰«é›·æ¸¸æˆ</h2>
                <p>ç»å…¸çš„æ‰«é›·æ¸¸æˆï¼Œè€ƒéªŒä½ çš„é€»è¾‘æ€ç»´</p>
                
                <!-- æ¸¸æˆæ•°æ®å±•ç¤º -->
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-label">æœ€é«˜å¾—åˆ†</div>
                        <div class="stat-value" data-stat="highestScore">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">æ¸¸ç©æ¬¡æ•°</div>
                        <div class="stat-value" data-stat="playedCount">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">æœ€è¿‘æ¸¸ç©</div>
                        <div class="stat-value" data-stat="lastPlayed">-</div>
                    </div>
                </div>
                
                <!-- éš¾åº¦é€‰æ‹©åŒºåŸŸ -->
                <div class="game-difficulty">
                    <div class="difficulty-label">éš¾åº¦é€‰æ‹©ï¼š</div>
                    <div class="difficulty-options">
                        <div class="difficulty-option" data-difficulty="easy">
                            <div class="stars">â˜…</div>
                            <div class="level">ç®€å•</div>
                        </div>
                        <div class="difficulty-option" data-difficulty="medium">
                            <div class="stars">â˜…â˜…</div>
                            <div class="level">ä¸­ç­‰</div>
                        </div>
                        <div class="difficulty-option" data-difficulty="hard">
                            <div class="stars">â˜…â˜…â˜…</div>
                            <div class="level">å›°éš¾</div>
                        </div>
                    </div>
                </div>
                
                <!-- æ¸¸æˆæŒ‰é’®ç»„ -->
                <div class="game-actions">
                    <button class="game-btn" onclick="startGameWithModal('minesweeper', 'æ‰«é›·æ¸¸æˆ', 'minesweeper/index.html')">å¼€å§‹æ¸¸æˆ</button>
                    <button class="game-btn secondary" onclick="playPreview('minesweeper')">è¯•ç©</button>
                </div>
            </div>
            
            <div class="game-card" data-categories="competitive,casual" data-game-id="tetris">
                <div class="game-categories">
                    <span class="game-category-badge">ç«æŠ€ç±»</span>
                    <span class="game-category-badge">ä¼‘é—²ç±»</span>
                </div>
                <!-- æ¸¸æˆé¢„è§ˆåŒºåŸŸ -->
                <div class="game-preview">
                    <div class="preview-placeholder">ğŸ® æ‚¬åœæŸ¥çœ‹æ¸¸æˆé¢„è§ˆ</div>
                    <img src="#" alt="ä¿„ç½—æ–¯æ–¹å—é¢„è§ˆ" class="preview-gif" data-gif="tetris-preview.gif">
                </div>
                <h2>ä¿„ç½—æ–¯æ–¹å—</h2>
                <p>ç»å…¸çš„ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆï¼ŒæŒ‘æˆ˜ä½ çš„ååº”é€Ÿåº¦</p>
                
                <!-- æ¸¸æˆæ•°æ®å±•ç¤º -->
                <div class="game-stats">
                    <div class="stat-item">
                        <div class="stat-label">æœ€é«˜å¾—åˆ†</div>
                        <div class="stat-value" data-stat="highestScore">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">æ¸¸ç©æ¬¡æ•°</div>
                        <div class="stat-value" data-stat="playedCount">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">æœ€è¿‘æ¸¸ç©</div>
                        <div class="stat-value" data-stat="lastPlayed">-</div>
                    </div>
                </div>
                
                <!-- éš¾åº¦é€‰æ‹©åŒºåŸŸ -->
                <div class="game-difficulty">
                    <div class="difficulty-label">éš¾åº¦é€‰æ‹©ï¼š</div>
                    <div class="difficulty-options">
                        <div class="difficulty-option" data-difficulty="easy">
                            <div class="stars">â˜…</div>
                            <div class="level">ç®€å•</div>
                        </div>
                        <div class="difficulty-option" data-difficulty="medium">
                            <div class="stars">â˜…â˜…</div>
                            <div class="level">ä¸­ç­‰</div>
                        </div>
                        <div class="difficulty-option" data-difficulty="hard">
                            <div class="stars">â˜…â˜…â˜…</div>
                            <div class="level">å›°éš¾</div>
                        </div>
                    </div>
                </div>
                
                <!-- æ¸¸æˆæŒ‰é’®ç»„ -->
                <div class="game-actions">
                    <button class="game-btn" onclick="startGameWithModal('tetris', 'ä¿„ç½—æ–¯æ–¹å—', 'tetris/index.html')">å¼€å§‹æ¸¸æˆ</button>
                    <button class="game-btn secondary" onclick="playPreview('tetris')">è¯•ç©</button>
                </div>
            </div>
        </div>
    </div>
    <!-- æ¸¸æˆéš¾åº¦é€‰æ‹©æ¨¡æ€çª—å£ -->
    <div id="difficultyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalGameTitle">é€‰æ‹©æ¸¸æˆéš¾åº¦</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="modal-difficulty-options">
                    <div class="modal-difficulty-option" data-difficulty="easy">
                        <div class="stars" style="color: gold; font-size: 1.2em; margin-right: 15px;">â˜…</div>
                        <div class="modal-difficulty-info">
                            <div class="modal-difficulty-name">ç®€å•</div>
                            <div class="modal-difficulty-desc">é€‚åˆåˆå­¦è€…ï¼Œè§„åˆ™ç®€å•ï¼ŒèŠ‚å¥è¾ƒæ…¢</div>
                        </div>
                    </div>
                    <div class="modal-difficulty-option" data-difficulty="medium">
                        <div class="stars" style="color: gold; font-size: 1.2em; margin-right: 15px;">â˜…â˜…</div>
                        <div class="modal-difficulty-info">
                            <div class="modal-difficulty-name">ä¸­ç­‰</div>
                            <div class="modal-difficulty-desc">é€‚åˆæœ‰ç»éªŒçš„ç©å®¶ï¼ŒæŒ‘æˆ˜æ€§é€‚ä¸­</div>
                        </div>
                    </div>
                    <div class="modal-difficulty-option" data-difficulty="hard">
                        <div class="stars" style="color: gold; font-size: 1.2em; margin-right: 15px;">â˜…â˜…â˜…</div>
                        <div class="modal-difficulty-info">
                            <div class="modal-difficulty-name">å›°éš¾</div>
                            <div class="modal-difficulty-desc">é€‚åˆé«˜æ‰‹ï¼Œè§„åˆ™å¤æ‚ï¼ŒèŠ‚å¥å¿«é€Ÿ</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="confirmDifficulty()">å¼€å§‹æ¸¸æˆ</button>
            </div>
        </div>
    </div>
    
    <!-- æ¸¸æˆè¯•ç©æ¨¡æ€çª—å£ -->
    <div id="previewModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2 class="modal-title" id="previewGameTitle">æ¸¸æˆè¯•ç©</h2>
                <span class="close" onclick="closePreviewModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span style="font-size: 0.9em; color: #666;">è¯•ç©æ—¶é•¿ï¼š<span id="previewTimer">60</span>ç§’</span>
                        <span id="previewStatus" style="font-weight: bold; color: #4a90e2;">è¿›è¡Œä¸­</span>
                    </div>
                    <div style="width: 100%; height: 5px; background: #e0e0e0; border-radius: 3px; overflow: hidden;">
                        <div id="previewProgress" style="height: 100%; width: 100%; background: #4a90e2; transition: width 1s linear;"></div>
                    </div>
                </div>
                <div id="previewIframeContainer" style="width: 100%; height: 300px; background: #f0f0f0; border-radius: 8px; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                    <div style="color: #666; font-size: 0.9em;">åŠ è½½è¯•ç©å†…å®¹...</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closePreviewModal()">å…³é—­</button>
                <button class="btn btn-primary" onclick="startFullGameFromPreview()">å¼€å§‹å®Œæ•´æ¸¸æˆ</button>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p>Â© 2024 æ¸¸æˆé›†åˆ - æŒç»­æ›´æ–°ä¸­...</p>
    </div>
    
    <script>
        // å…¨å±€å˜é‡
        let currentGameId = '';
        let currentGameUrl = '';
        let selectedDifficulty = 'medium';
        
        // æ¸¸æˆåˆ†ç±»ä¸ç­›é€‰ç³»ç»Ÿ
        document.addEventListener('DOMContentLoaded', function() {
            const categoryTags = document.querySelectorAll('.category-tag');
            const gameCards = document.querySelectorAll('.game-card');
            const filterStatus = document.querySelector('.filter-status');
            
            let activeCategories = new Set(['all']);
            
            // æ¸²æŸ“ç­›é€‰çŠ¶æ€
            function renderFilterStatus() {
                filterStatus.innerHTML = '';
                
                if (activeCategories.size === 1 && activeCategories.has('all')) {
                    filterStatus.innerHTML = '<span class="no-filters">æœªåº”ç”¨ç­›é€‰</span>';
                    return;
                }
                
                const categories = Array.from(activeCategories).filter(cat => cat !== 'all');
                categories.forEach(category => {
                    const chip = document.createElement('div');
                    chip.className = 'filter-chip';
                    chip.innerHTML = `${getCategoryName(category)} <button class="remove-btn" data-category="${category}">&times;</button>`;
                    filterStatus.appendChild(chip);
                });
                
                // æ·»åŠ æ¸…é™¤æ‰€æœ‰ç­›é€‰æŒ‰é’®
                const clearAllBtn = document.createElement('button');
                clearAllBtn.className = 'filter-chip';
                clearAllBtn.innerHTML = 'æ¸…é™¤æ‰€æœ‰ <button class="remove-btn">&times;</button>';
                clearAllBtn.style.background = '#6c757d';
                clearAllBtn.addEventListener('click', function() {
                    activeCategories.clear();
                    activeCategories.add('all');
                    updateCategoryTags();
                    applyFilters();
                    renderFilterStatus();
                });
                filterStatus.appendChild(clearAllBtn);
            }
            
            // è·å–åˆ†ç±»åç§°
            function getCategoryName(category) {
                const categoryNames = {
                    'puzzle': 'ç›Šæ™ºç±»',
                    'casual': 'ä¼‘é—²ç±»',
                    'competitive': 'ç«æŠ€ç±»'
                };
                return categoryNames[category] || category;
            }
            
            // æ›´æ–°åˆ†ç±»æ ‡ç­¾çŠ¶æ€
            function updateCategoryTags() {
                categoryTags.forEach(tag => {
                    const category = tag.dataset.category;
                    if (activeCategories.has(category)) {
                        tag.classList.add('active');
                    } else {
                        tag.classList.remove('active');
                    }
                });
            }
            
            // åº”ç”¨ç­›é€‰
            function applyFilters() {
                gameCards.forEach(card => {
                    const cardCategories = card.dataset.categories.split(',');
                    let shouldShow = false;
                    
                    if (activeCategories.has('all')) {
                        shouldShow = true;
                    } else {
                        const categoriesToCheck = Array.from(activeCategories);
                        shouldShow = categoriesToCheck.some(cat => cardCategories.includes(cat));
                    }
                    
                    if (shouldShow) {
                        card.classList.remove('hidden');
                    } else {
                        card.classList.add('hidden');
                    }
                });
            }
            
            // åˆ†ç±»æ ‡ç­¾ç‚¹å‡»äº‹ä»¶
            categoryTags.forEach(tag => {
                tag.addEventListener('click', function() {
                    const category = this.dataset.category;
                    
                    if (category === 'all') {
                        activeCategories.clear();
                        activeCategories.add('all');
                    } else {
                        activeCategories.delete('all');
                        if (activeCategories.has(category)) {
                            activeCategories.delete(category);
                        } else {
                            activeCategories.add(category);
                        }
                        
                        // å¦‚æœæ²¡æœ‰é€‰æ‹©ä»»ä½•åˆ†ç±»ï¼Œé»˜è®¤æ˜¾ç¤ºå…¨éƒ¨
                        if (activeCategories.size === 0) {
                            activeCategories.add('all');
                        }
                    }
                    
                    updateCategoryTags();
                    applyFilters();
                    renderFilterStatus();
                });
            });
            
            // ç­›é€‰èŠ¯ç‰‡ç§»é™¤äº‹ä»¶ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰
            filterStatus.addEventListener('click', function(e) {
                if (e.target.classList.contains('remove-btn')) {
                    const parent = e.target.closest('.filter-chip');
                    if (parent && parent.querySelector('[data-category]')) {
                        const category = parent.querySelector('[data-category]').dataset.category;
                        activeCategories.delete(category);
                        
                        if (activeCategories.size === 0) {
                            activeCategories.add('all');
                        }
                        
                        updateCategoryTags();
                        applyFilters();
                        renderFilterStatus();
                    }
                }
            });
            
            // é¢„ç•™åŠ¨æ€æ·»åŠ åˆ†ç±»çš„æ¥å£
            window.gameCategorySystem = {
                addCategory: function(categoryId, categoryName) {
                    // åŠ¨æ€æ·»åŠ åˆ†ç±»æ ‡ç­¾
                    const tag = document.createElement('span');
                    tag.className = 'category-tag';
                    tag.dataset.category = categoryId;
                    tag.textContent = categoryName;
                    document.querySelector('.category-tags').appendChild(tag);
                    
                    // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                    tag.addEventListener('click', function() {
                        const category = this.dataset.category;
                        activeCategories.delete('all');
                        if (activeCategories.has(category)) {
                            activeCategories.delete(category);
                        } else {
                            activeCategories.add(category);
                        }
                        
                        if (activeCategories.size === 0) {
                            activeCategories.add('all');
                        }
                        
                        updateCategoryTags();
                        applyFilters();
                        renderFilterStatus();
                    });
                }
            };
            
            // å¡ç‰‡å†…éš¾åº¦é€‰æ‹©äº‹ä»¶
            const difficultyOptions = document.querySelectorAll('.difficulty-option');
            difficultyOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const gameCard = this.closest('.game-card');
                    const gameId = gameCard.dataset.gameId;
                    const difficulty = this.dataset.difficulty;
                    
                    // è·å–æ¸¸æˆURLï¼ˆç®€åŒ–å¤„ç†ï¼Œå®é™…é¡¹ç›®ä¸­åº”ä»é…ç½®æˆ–æ•°æ®ä¸­è·å–ï¼‰
                    const gameUrls = {
                        '24-point': '24-point-game/index.html',
                        'guess-number': 'guess-number-game/index.html',
                        'minesweeper': 'minesweeper/index.html',
                        'tetris': 'tetris/index.html'
                    };
                    
                    const gameUrl = gameUrls[gameId];
                    if (gameUrl) {
                        startGame(gameId, difficulty, gameUrl);
                    }
                });
            });
            
            // æ¨¡æ€çª—å£éš¾åº¦é€‰æ‹©äº‹ä»¶
            const modalDifficultyOptions = document.querySelectorAll('.modal-difficulty-option');
            modalDifficultyOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
                    modalDifficultyOptions.forEach(opt => opt.classList.remove('selected'));
                    // æ·»åŠ å½“å‰é€‰ä¸­çŠ¶æ€
                    this.classList.add('selected');
                    // æ›´æ–°é€‰ä¸­çš„éš¾åº¦
                    selectedDifficulty = this.dataset.difficulty;
                });
            });
        });
        
        // æ¸¸æˆéš¾åº¦é€‰æ‹©åŠŸèƒ½
        
        // æ‰“å¼€éš¾åº¦é€‰æ‹©æ¨¡æ€çª—å£
        function startGameWithModal(gameId, gameTitle, gameUrl) {
            currentGameId = gameId;
            currentGameUrl = gameUrl;
            document.getElementById('modalGameTitle').textContent = `é€‰æ‹©${gameTitle}éš¾åº¦`;
            
            // é‡ç½®é€‰ä¸­çŠ¶æ€
            const modalDifficultyOptions = document.querySelectorAll('.modal-difficulty-option');
            modalDifficultyOptions.forEach(opt => opt.classList.remove('selected'));
            document.querySelector(`[data-difficulty="${selectedDifficulty}"]`).classList.add('selected');
            
            // æ˜¾ç¤ºæ¨¡æ€çª—å£
            document.getElementById('difficultyModal').style.display = 'block';
        }
        
        // å…³é—­æ¨¡æ€çª—å£
        function closeModal() {
            document.getElementById('difficultyModal').style.display = 'none';
        }
        
        // ç¡®è®¤éš¾åº¦é€‰æ‹©
        function confirmDifficulty() {
            startGame(currentGameId, selectedDifficulty, currentGameUrl);
            closeModal();
        }
        
        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        function showLoading(message = 'åŠ è½½ä¸­...', progress = 'å‡†å¤‡èµ„æºæ–‡ä»¶...') {
            const loadingOverlay = document.getElementById('loadingOverlay');
            const loadingText = loadingOverlay.querySelector('.loading-text');
            const loadingProgress = loadingOverlay.querySelector('.loading-progress');
            
            loadingText.textContent = message;
            loadingProgress.textContent = progress;
            loadingOverlay.style.display = 'flex';
            
            // ä½¿ç”¨setTimeoutç¡®ä¿æ ·å¼è¿‡æ¸¡æ•ˆæœæ­£å¸¸è§¦å‘
            setTimeout(() => {
                loadingOverlay.classList.add('show');
            }, 10);
        }
        
        // éšè—åŠ è½½çŠ¶æ€
        function hideLoading() {
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.classList.remove('show');
            
            setTimeout(() => {
                loadingOverlay.style.display = 'none';
            }, 300);
        }
        
        // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
        function checkFileExists(url) {
            return new Promise((resolve) => {
                const xhr = new XMLHttpRequest();
                xhr.open('HEAD', url, true);
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === 4) {
                        if (xhr.status >= 200 && xhr.status < 300) {
                            resolve(true);
                        } else {
                            resolve(false);
                        }
                    }
                };
                xhr.onerror = function() {
                    resolve(false);
                };
                xhr.send();
            });
        }
        
        // æ˜¾ç¤ºé”™è¯¯æç¤º
        function showError(message) {
            alert(message);
        }
        
        // å¼€å§‹æ¸¸æˆ
        async function startGame(gameId, difficulty, gameUrl) {
            try {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                showLoading('æ­£åœ¨å‡†å¤‡æ¸¸æˆ...', 'æ£€æŸ¥æ¸¸æˆæ–‡ä»¶...');
                
                // æ£€æŸ¥æ¸¸æˆæ–‡ä»¶æ˜¯å¦å­˜åœ¨
                const fileExists = await checkFileExists(gameUrl);
                
                if (!fileExists) {
                    hideLoading();
                    showError('è¯¥æ¸¸æˆæš‚æœªä¸Šçº¿ï¼Œæ•¬è¯·æœŸå¾…ï¼');
                    return;
                }
                
                // æ›´æ–°åŠ è½½çŠ¶æ€
                showLoading('æ­£åœ¨å‡†å¤‡æ¸¸æˆ...', 'åˆå§‹åŒ–æ¸¸æˆæ•°æ®...');
                
                // ä¿å­˜æ¸¸æˆéš¾åº¦åˆ°localStorage
                localStorage.setItem(`currentDifficulty_${gameId}`, difficulty);
                
                // è®°å½•æ¸¸æˆå¯åŠ¨ä¿¡æ¯
                const gameStats = JSON.parse(localStorage.getItem('gameStats')) || {};
                if (!gameStats[gameId]) {
                    gameStats[gameId] = {
                        playedCount: 0,
                        highestScore: 0,
                        averageTime: 0,
                        totalTime: 0,
                        lastPlayed: new Date().toISOString(),
                        difficultyStats: {
                            easy: { playedCount: 0, highestScore: 0 },
                            medium: { playedCount: 0, highestScore: 0 },
                            hard: { playedCount: 0, highestScore: 0 }
                        }
                    };
                }
                
                // æ›´æ–°æ¸¸æˆç»Ÿè®¡æ•°æ®
                gameStats[gameId].playedCount++;
                gameStats[gameId].lastPlayed = new Date().toISOString();
                gameStats[gameId].difficultyStats[difficulty].playedCount++;
                
                localStorage.setItem('gameStats', JSON.stringify(gameStats));
                
                // æ›´æ–°åŠ è½½çŠ¶æ€
                showLoading('æ­£åœ¨å‡†å¤‡æ¸¸æˆ...', 'å³å°†å¯åŠ¨æ¸¸æˆ...');
                
                // çŸ­æš‚å»¶è¿Ÿï¼Œè®©ç”¨æˆ·çœ‹åˆ°åŠ è½½è¿›åº¦
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // éšè—åŠ è½½çŠ¶æ€
                hideLoading();
                
                // æ‰“å¼€æ¸¸æˆé¡µé¢
                window.open(`${gameUrl}?difficulty=${difficulty}`, '_blank');
            } catch (error) {
                hideLoading();
                showError('æ¸¸æˆå¯åŠ¨å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ï¼');
                console.error('Game start error:', error);
            }
        }
        
        // é¢„è§ˆGIFä¼˜åŒ–åŠ è½½
        let gifPreloadCache = new Map();
        
        // é¢„åŠ è½½é¢„è§ˆGIF
        function preloadGifs() {
            const previewGifs = document.querySelectorAll('.preview-gif');
            previewGifs.forEach(gif => {
                const gifUrl = gif.dataset.gif;
                if (gifUrl && !gifPreloadCache.has(gifUrl)) {
                    const img = new Image();
                    img.src = gifUrl;
                    img.onload = () => {
                        gifPreloadCache.set(gifUrl, img);
                    };
                }
            });
        }
        
        // æ•°æ®å±•ç¤ºåŠŸèƒ½
        
        // æ›´æ–°æ¸¸æˆå¡ç‰‡ç»Ÿè®¡æ•°æ®
        function updateGameStats() {
            const gameStats = JSON.parse(localStorage.getItem('gameStats')) || {};
            const gameCards = document.querySelectorAll('.game-card');
            
            gameCards.forEach(card => {
                const gameId = card.dataset.gameId;
                const stats = gameStats[gameId] || {
                    playedCount: 0,
                    highestScore: 0,
                    lastPlayed: null
                };
                
                // æ›´æ–°æœ€é«˜å¾—åˆ†
                const highestScoreEl = card.querySelector('[data-stat="highestScore"]');
                if (highestScoreEl) {
                    highestScoreEl.textContent = stats.highestScore || 0;
                }
                
                // æ›´æ–°æ¸¸ç©æ¬¡æ•°
                const playedCountEl = card.querySelector('[data-stat="playedCount"]');
                if (playedCountEl) {
                    playedCountEl.textContent = stats.playedCount || 0;
                }
                
                // æ›´æ–°æœ€è¿‘æ¸¸ç©æ—¶é—´
                const lastPlayedEl = card.querySelector('[data-stat="lastPlayed"]');
                if (lastPlayedEl) {
                    if (stats.lastPlayed) {
                        const date = new Date(stats.lastPlayed);
                        lastPlayedEl.textContent = `${date.getMonth() + 1}/${date.getDate()}`;
                    } else {
                        lastPlayedEl.textContent = '-';
                    }
                }
            });
        }
        
        // è¯•ç©åŠŸèƒ½
        let previewTimerInterval = null;
        let previewTimeLeft = 60;
        let currentPreviewGameId = '';
        
        function playPreview(gameId) {
            currentPreviewGameId = gameId;
            
            // è®¾ç½®æ¸¸æˆæ ‡é¢˜
            const gameTitles = {
                '24-point': '24ç‚¹æ¸¸æˆ',
                'guess-number': 'çŒœæ•°å­—æ¸¸æˆ',
                'minesweeper': 'æ‰«é›·æ¸¸æˆ',
                'tetris': 'ä¿„ç½—æ–¯æ–¹å—'
            };
            document.getElementById('previewGameTitle').textContent = `${gameTitles[gameId]} - è¯•ç©`;
            
            // é‡ç½®è®¡æ—¶å™¨
            previewTimeLeft = 60;
            document.getElementById('previewTimer').textContent = previewTimeLeft;
            document.getElementById('previewStatus').textContent = 'è¿›è¡Œä¸­';
            document.getElementById('previewStatus').style.color = '#4a90e2';
            document.getElementById('previewProgress').style.width = '100%';
            
            // åˆ›å»ºiframe
            const iframeContainer = document.getElementById('previewIframeContainer');
            iframeContainer.innerHTML = `<iframe src="${getPreviewUrl(gameId)}" style="width: 100%; height: 100%; border: none;"></iframe>`;
            
            // æ˜¾ç¤ºæ¨¡æ€çª—å£
            document.getElementById('previewModal').style.display = 'block';
            
            // å¯åŠ¨è®¡æ—¶å™¨
            if (previewTimerInterval) {
                clearInterval(previewTimerInterval);
            }
            previewTimerInterval = setInterval(() => {
                previewTimeLeft--;
                document.getElementById('previewTimer').textContent = previewTimeLeft;
                const progress = (previewTimeLeft / 60) * 100;
                document.getElementById('previewProgress').style.width = `${progress}%`;
                
                if (previewTimeLeft <= 0) {
                    clearInterval(previewTimerInterval);
                    document.getElementById('previewStatus').textContent = 'æ—¶é—´åˆ°';
                    document.getElementById('previewStatus').style.color = '#e74c3c';
                }
            }, 1000);
        }
        
        // è·å–è¯•ç©URL
        function getPreviewUrl(gameId) {
            // å®é™…é¡¹ç›®ä¸­åº”è¿”å›çœŸå®çš„è¯•ç©é¡µé¢URL
            const previewUrls = {
                '24-point': '#',
                'guess-number': '#',
                'minesweeper': '#',
                'tetris': '#'
            };
            return previewUrls[gameId] || '#';
        }
        
        // å…³é—­è¯•ç©æ¨¡æ€çª—å£
        function closePreviewModal() {
            document.getElementById('previewModal').style.display = 'none';
            if (previewTimerInterval) {
                clearInterval(previewTimerInterval);
            }
        }
        
        // ä»è¯•ç©å¼€å§‹å®Œæ•´æ¸¸æˆ
        function startFullGameFromPreview() {
            closePreviewModal();
            // æ ¹æ®å½“å‰è¯•ç©çš„æ¸¸æˆIDå¯åŠ¨å®Œæ•´æ¸¸æˆ
            const gameUrls = {
                '24-point': '24-point-game/index.html',
                'guess-number': 'guess-number-game/index.html',
                'minesweeper': 'minesweeper/index.html',
                'tetris': 'tetris/index.html'
            };
            
            const gameTitleMap = {
                '24-point': '24ç‚¹æ¸¸æˆ',
                'guess-number': 'çŒœæ•°å­—æ¸¸æˆ',
                'minesweeper': 'æ‰«é›·æ¸¸æˆ',
                'tetris': 'ä¿„ç½—æ–¯æ–¹å—'
            };
            
            const gameUrl = gameUrls[currentPreviewGameId];
            const gameTitle = gameTitleMap[currentPreviewGameId];
            
            if (gameUrl && gameTitle) {
                startGameWithModal(currentPreviewGameId, gameTitle, gameUrl);
            }
        }
        
        // ç‚¹å‡»æ¨¡æ€çª—å£å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const difficultyModal = document.getElementById('difficultyModal');
            const previewModal = document.getElementById('previewModal');
            
            if (event.target == difficultyModal) {
                closeModal();
            }
            
            if (event.target == previewModal) {
                closePreviewModal();
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateGameStats();
            preloadGifs();
        });
        
        // å…¨å±€åŠŸèƒ½ç³»ç»Ÿ
        
        // 1. æš—é»‘æ¨¡å¼åˆ‡æ¢ç³»ç»Ÿ
        let isDarkMode = localStorage.getItem('darkMode') === 'true' || window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        // åˆå§‹åŒ–æš—é»‘æ¨¡å¼
        function initDarkMode() {
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('darkModeText').textContent = 'æµ…è‰²æ¨¡å¼';
            } else {
                document.body.classList.remove('dark-mode');
                document.getElementById('darkModeText').textContent = 'æš—é»‘æ¨¡å¼';
            }
        }
        
        // åˆ‡æ¢æš—é»‘æ¨¡å¼
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            localStorage.setItem('darkMode', isDarkMode);
            initDarkMode();
        }
        
        // 2. å¤šè¯­è¨€åˆ‡æ¢ç³»ç»Ÿ
        let currentLanguage = localStorage.getItem('currentLanguage') || 'zh-CN';
        
        // è¯­è¨€åŒ…
        const translations = {
            'zh-CN': {
                'pageTitle': 'ğŸ® æ¸¸æˆé›†åˆ ğŸ®',
                'categoryTitle': 'æ¸¸æˆåˆ†ç±»ï¼š',
                'all': 'å…¨éƒ¨',
                'puzzle': 'ç›Šæ™ºç±»',
                'casual': 'ä¼‘é—²ç±»',
                'competitive': 'ç«æŠ€ç±»',
                'noFilters': 'æœªåº”ç”¨ç­›é€‰',
                'clearAll': 'æ¸…é™¤æ‰€æœ‰',
                'difficultySelect': 'éš¾åº¦é€‰æ‹©ï¼š',
                'easy': 'ç®€å•',
                'medium': 'ä¸­ç­‰',
                'hard': 'å›°éš¾',
                'startGame': 'å¼€å§‹æ¸¸æˆ',
                'tryPlay': 'è¯•ç©',
                'footerText': 'Â© 2024 æ¸¸æˆé›†åˆ - æŒç»­æ›´æ–°ä¸­...',
                'darkMode': 'æš—é»‘æ¨¡å¼',
                'lightMode': 'æµ…è‰²æ¨¡å¼',
                'play': 'æ’­æ”¾',
                'pause': 'æš‚åœ'
            },
            'en-US': {
                'pageTitle': 'ğŸ® Game Collection ğŸ®',
                'categoryTitle': 'Game Categories:',
                'all': 'All',
                'puzzle': 'Puzzle',
                'casual': 'Casual',
                'competitive': 'Competitive',
                'noFilters': 'No filters applied',
                'clearAll': 'Clear All',
                'difficultySelect': 'Difficulty:',
                'easy': 'Easy',
                'medium': 'Medium',
                'hard': 'Hard',
                'startGame': 'Start Game',
                'tryPlay': 'Try',
                'footerText': 'Â© 2024 Game Collection - Continuously updating...',
                'darkMode': 'Dark Mode',
                'lightMode': 'Light Mode',
                'play': 'Play',
                'pause': 'Pause'
            }
        };
        
        // åˆå§‹åŒ–è¯­è¨€
        function initLanguage() {
            document.getElementById('languageSelect').value = currentLanguage;
            translatePage();
        }
        
        // ç¿»è¯‘é¡µé¢
        function translatePage() {
            const lang = translations[currentLanguage];
            if (!lang) return;
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            document.getElementById('pageTitle').textContent = lang.pageTitle;
            
            // æ›´æ–°åˆ†ç±»æ ‡é¢˜
            document.querySelector('.category-title').textContent = lang.categoryTitle;
            
            // æ›´æ–°åˆ†ç±»æ ‡ç­¾
            document.querySelector('[data-category="all"]').textContent = lang.all;
            document.querySelector('[data-category="puzzle"]').textContent = lang.puzzle;
            document.querySelector('[data-category="casual"]').textContent = lang.casual;
            document.querySelector('[data-category="competitive"]').textContent = lang.competitive;
            
            // æ›´æ–°éš¾åº¦æ ‡ç­¾
            document.querySelectorAll('.difficulty-label').forEach(el => {
                el.textContent = `${lang.difficultySelect}`;
            });
            
            // æ›´æ–°éš¾åº¦é€‰é¡¹
            document.querySelectorAll('[data-difficulty="easy"] .level').forEach(el => {
                el.textContent = lang.easy;
            });
            document.querySelectorAll('[data-difficulty="medium"] .level').forEach(el => {
                el.textContent = lang.medium;
            });
            document.querySelectorAll('[data-difficulty="hard"] .level').forEach(el => {
                el.textContent = lang.hard;
            });
            
            // æ›´æ–°æŒ‰é’®æ–‡æœ¬
            document.querySelectorAll('.game-btn:not(.secondary)').forEach(el => {
                el.textContent = lang.startGame;
            });
            document.querySelectorAll('.game-btn.secondary').forEach(el => {
                el.textContent = lang.tryPlay;
            });
            
            // æ›´æ–°é¡µè„šæ–‡æœ¬
            document.querySelector('.footer p').textContent = lang.footerText;
            
            // æ›´æ–°æš—é»‘æ¨¡å¼æ–‡æœ¬
            document.getElementById('darkModeText').textContent = isDarkMode ? lang.lightMode : lang.darkMode;
        }
        
        // åˆ‡æ¢è¯­è¨€
        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('currentLanguage', lang);
            translatePage();
        }
        
        // 3. èƒŒæ™¯éŸ³ä¹æ§åˆ¶ç³»ç»Ÿ
        let isMusicPlaying = localStorage.getItem('isMusicPlaying') === 'true';
        let musicVolume = parseInt(localStorage.getItem('musicVolume')) || 50;
        let audioElement = null;
        
        // åˆå§‹åŒ–èƒŒæ™¯éŸ³ä¹
        function initMusic() {
            // åˆ›å»ºéŸ³é¢‘å…ƒç´ 
            audioElement = new Audio();
            audioElement.loop = true;
            audioElement.volume = musicVolume / 100;
            
            // æ›´æ–°UI
            document.getElementById('volumeSlider').value = musicVolume;
            updateMusicUI();
        }
        
        // æ›´æ–°éŸ³ä¹UI
        function updateMusicUI() {
            const musicToggle = document.getElementById('musicToggle');
            const musicIcon = document.getElementById('musicIcon');
            
            if (isMusicPlaying) {
                musicToggle.textContent = translations[currentLanguage].pause;
                musicIcon.textContent = 'ğŸµ';
            } else {
                musicToggle.textContent = translations[currentLanguage].play;
                musicIcon.textContent = 'ğŸ”‡';
            }
        }
        
        // åˆ‡æ¢éŸ³ä¹æ’­æ”¾çŠ¶æ€
        function toggleMusic() {
            isMusicPlaying = !isMusicPlaying;
            localStorage.setItem('isMusicPlaying', isMusicPlaying);
            
            if (isMusicPlaying) {
                // å®é™…é¡¹ç›®ä¸­åº”æ›¿æ¢ä¸ºçœŸå®çš„èƒŒæ™¯éŸ³ä¹URL
                // audioElement.src = 'background-music.mp3';
                // audioElement.play().catch(e => console.error('Music play failed:', e));
            } else {
                // audioElement.pause();
            }
            
            updateMusicUI();
        }
        
        // è°ƒæ•´éŸ³é‡
        function adjustVolume(volume) {
            musicVolume = parseInt(volume);
            localStorage.setItem('musicVolume', musicVolume);
            
            if (audioElement) {
                audioElement.volume = musicVolume / 100;
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–å…¨å±€åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            initDarkMode();
            initLanguage();
            initMusic();
        });
        
        // æä¾›å¤–éƒ¨æ¥å£
        window.updateGameStats = updateGameStats;
        window.preloadGifs = preloadGifs;
        window.toggleDarkMode = toggleDarkMode;
        window.changeLanguage = changeLanguage;
        window.toggleMusic = toggleMusic;
        window.adjustVolume = adjustVolume;
    </script>
</body>
</html>